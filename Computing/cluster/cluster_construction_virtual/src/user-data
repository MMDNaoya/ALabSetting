#cloud-config
autoinstall:
  version: 1
  interactive-sections: []
  network:
    version: 2
    ethernets:
      eth0:
        match:
          name: "enp*"
        addresses:
        - 200.0.100.1/16
        nameservers:
          addresses: [8.8.8.8, 8.8.4.4]
        routes:
          - to: default
            via: 200.0.0.1
  apt:
    disable_components: []
    fallback: offline-install
    geoip: true
    mirror-selection:
      primary:
      - country-mirror
      - arches: &id001
        - amd64
        - i386
        uri: http://archive.ubuntu.com/ubuntu/
      - arches: &id002
        - s390x
        - arm64
        - armhf
        - powerpc
        - ppc64el
        - riscv64
        uri: http://ports.ubuntu.com/ubuntu-ports
    preserve_sources_list: true
    security:
    - arches: *id001
      uri: http://security.ubuntu.com/ubuntu/
    - arches: *id002
      uri: http://ports.ubuntu.com/ubuntu-ports
  codecs:
    install: false
  kernel:
    package: linux-generic
  proxy: http://200.0.0.1:3142
  source:
    id: ubuntu-server-minimal
    search_drivers: false
  locale: en_US.UTF-8
  keyboard:
    layout: jp
  timezone: Asia/Tokyo
  identity:
    hostname: autoinstall
    realname: worker
    username: worker
    password: "$6$5CZmgPFZjmCn6T8y$dKbVjLOs5sdwqkfudYl9EP690vAoi4h2g8.QUfI1R5S0gNtLZsfdTFb8RcSujMxdtK4LUTaYpD/RWtnuxx2l71"
  ssh:
    install-server: true
    authorized-keys:
      # replace with the contents of the public key(s) as generated by
      # ssh-keygen or similar tools
      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEXD+2YqMdsMnK9ADb3wbDDVSNXxGtjWoPlIeQlkLXl+ controller@controller
    allow-pw: false
  storage:
    layout:
      name: lvm
      sizing-policy: all
  updates: security
  shutdown: poweroff
